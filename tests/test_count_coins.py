import unittest

from modules.counter import count_unique_symbols_in_string, count_total
import json


def _get_api_stuff():
    """
    Lets mock get_binance_coins_with_keywords away.
    :return:
    """
    str_json = """{"STPT": ["stpt", "STPT", "Standard tokenization protocol", "standard tokenization protocol", "STANDARD TOKENIZATION PROTOCOL", "Stpt"], "MXN": ["MXN", "Mexican peso", "mexican peso", "Mxn", "MEXICAN PESO", "mxn"], "UGX": ["UGX", "Uganda shilling", "Ugx", "ugx", "UGANDA SHILLING", "uganda shilling"], "RENBTC": ["renbtc", "RENBTC", "Renbtc"], "GLM": ["GOLEM", "Glm", "glm", "Golem", "GLM", "golem"], "NEAR": ["Near", "near", "Near protocol", "NEAR", "NEAR PROTOCOL", "near protocol"], "AUDIO": ["AUDIUS", "audius", "audio", "Audius", "AUDIO", "Audio"], "HNT": ["Hnt", "Helium", "HELIUM", "helium", "HNT", "hnt"], "ADADOWN": ["Adadown", "ADADOWN", "adadown"], "CDT": ["CDT", "Blox", "blox", "cdt", "Cdt", "BLOX"], "SPARTA": ["sparta", "spartan protocol", "SPARTA", "Sparta", "SPARTAN PROTOCOL", "Spartan protocol"], "SUSD": ["Susd", "susd", "SUSD"], "AION": ["aion", "AION", "Aion"], "NPXS": ["NPXS", "npxs", "Npxs", "old pundi x", "OLD PUNDI X", "Old pundi x"], "DGB": ["Dgb", "dgb", "Digibyte", "digibyte", "DIGIBYTE", "DGB"], "ZRX": ["0X", "ZRX", "0x", "zrx", "Zrx"], "BCD": ["BCD", "Bcd", "BITCOIN DIAMOND", "Bitcoin diamond", "bitcoin diamond", "bcd"], "EASY": ["easyfi", "easy", "EASYFI", "EASY", "Easyfi", "Easy"], "WING": ["Wing", "wing", "WING", "WING TOKEN", "wing token", "Wing token"], "AE": ["aeternity", "Aeternity", "ae", "Ae", "AE", "AETERNITY"], "WNXM": ["Wnxm", "wrapped nxm", "wnxm", "WRAPPED NXM", "Wrapped nxm", "WNXM"], "BCH": ["BCH", "bch", "Bitcoin cash", "BITCOIN CASH", "Bch", "bitcoin cash"], "ADAUP": ["ADAUP", "Adaup", "adaup"], "JST": ["Just", "jst", "Jst", "JUST", "JST", "just"], "HOT": ["Hot", "Holo", "hot", "holo", "HOLO", "HOT"], "IRIS": ["IRIS", "Irisnet", "Iris", "irisnet", "IRISNET", "iris"], "RAMP": ["ramp", "Ramp", "RAMP"], "BCX": ["bitcoinx", "Bitcoinx", "Bcx", "bcx", "BITCOINX", "BCX"], "SEK": ["SEK", "Sek", "SWEDISH KRONER ", "Swedish kroner ", "swedish kroner ", "sek"], "TRIG": ["TRIG", "TRIGGERS", "triggers", "Triggers", "trig", "Trig"], "RCN": ["ripio credit network", "Ripio credit network", "RIPIO CREDIT NETWORK", "RCN", "rcn", "Rcn"], "COVER": ["cover", "COVER", "COVER PROTOCOL", "cover protocol", "Cover protocol", "Cover"], "FLM": ["Flm", "flm", "flamingo", "Flamingo", "FLM", "FLAMINGO"], "GNT": ["GOLEM", "gnt", "GNT", "Golem", "golem", "Gnt"], "VITE": ["VITE", "Vite", "vite"], "BKRW": ["Binance krw", "BINANCE KRW", "BKRW", "binance krw", "bkrw", "Bkrw"], "CFX": ["CONFLUX NETWORK", "Cfx", "Conflux network", "CFX", "cfx", "conflux network"], "XPR": ["Xpr", "proton", "xpr", "PROTON", "XPR", "Proton"], "SFP": ["safepal", "SFP", "SAFEPAL", "Safepal", "Sfp", "sfp"], "DIA": ["DIA", "dia", "Dia"], "RDN": ["Raiden network token", "Rdn", "RDN", "raiden network token", "rdn", "RAIDEN NETWORK TOKEN"], "ARDR": ["ARDOR", "Ardor", "Ardr", "ardor", "ARDR", "ardr"], "CLOAK": ["CLOAK", "Cloak", "CLOAKCOIN", "cloakcoin", "cloak", "Cloakcoin"], "LOOMOLD": ["LOOMOLD", "Old loom network", "loomold", "OLD LOOM NETWORK", "old loom network", "Loomold"], "NEBL": ["NEBLIO", "Nebl", "NEBL", "neblio", "Neblio", "nebl"], "BEL": ["Bel", "bella protocol", "Bella protocol", "bel", "BELLA PROTOCOL", "BEL"], "JUV": ["Juv", "JUVENTUS FAN TOKEN", "Juventus fan token", "JUV", "juv", "juventus fan token"], "ACM": ["ac milan fan token", "ACM", "Acm", "acm", "AC MILAN FAN TOKEN", "Ac milan fan token"], "GRTDOWN": ["Grtdown", "GRTDOWN", "grtdown"], "VTHO": ["VETHOR TOKEN", "vtho", "Vethor token", "Vtho", "vethor token", "VTHO"], "SALT": ["SALT", "Salt", "salt"], "STORM": ["storm", "STORM", "Storm"], "REN": ["REN", "ren", "Ren"], "REP": ["Augur v2", "Rep", "augur v2", "rep", "REP", "AUGUR V2"], "ADA": ["cardano", "Ada", "ADA", "ada", "CARDANO", "Cardano"], "ELF": ["Aelf", "ELF", "aelf", "Elf", "AELF", "elf"], "REQ": ["Request network", "request network", "REQ", "REQUEST NETWORK", "req", "Req"], "STORJ": ["Storj", "storj", "STORJ"], "CHF": ["Schweizer franken", "Chf", "SCHWEIZER FRANKEN", "chf", "CHF", "schweizer franken"], "BZRX": ["Bzrx", "BZX PROTOCOL", "bzrx", "Bzx protocol", "BZRX", "bzx protocol"], "ADD": ["ADD", "Add", "add"], "SGT": ["Sgt", "sgt", "snglsdao governance token", "SNGLSDAO GOVERNANCE TOKEN", "SGT", "Snglsdao governance token"], "DF": ["DFORCE", "Df", "Dforce", "DF", "df", "dforce"], "EOSDOWN": ["Eosdown", "EOSDOWN", "eosdown"], "PAXG": ["PAX GOLD", "pax gold", "Paxg", "Pax gold", "paxg", "PAXG"], "YOYO": ["yoyo", "Yoyow", "YOYO", "YOYOW", "Yoyo", "yoyow"], "PAX": ["pax", "Paxos standard", "paxos standard", "Pax", "PAX", "PAXOS STANDARD"], "CHR": ["CHR", "CHROMIA", "chromia", "Chr", "Chromia", "chr"], "VND": ["Vnd", "vietnamese dong", "Vietnamese dong", "vnd", "VIETNAMESE DONG", "VND"], "BCHDOWN": ["Bchdown", "bchdown", "BCHDOWN"], "WAVES": ["WAVES", "waves", "Waves"], "CHZ": ["CHZ", "Chiliz", "chiliz", "Chz", "CHILIZ", "chz"], "ADX": ["ADX", "adex", "Adx", "Adex", "adx", "ADEX"], "XRP": ["Ripple", "Xrp", "XRP", "xrp", "ripple", "RIPPLE"], "WPR": ["WPR", "Wpr", "wpr", "Wepower", "wepower", "WEPOWER"], "AED": ["AED", "aed", "United arab emirates dirham", "Aed", "UNITED ARAB EMIRATES DIRHAM", "united arab emirates dirham"], "SAND": ["Sand", "the sandbox", "THE SANDBOX", "The sandbox", "sand", "SAND"], "DKK": ["DANISH KRONER ", "DKK", "danish kroner ", "Dkk", "Danish kroner ", "dkk"], "OCEAN": ["Ocean", "ocean protocol", "Ocean protocol", "OCEAN PROTOCOL", "OCEAN", "ocean"], "FOR": ["FOR", "FORTUBE", "For", "Fortube", "fortube", "for"], "UMA": ["UMA", "Uma", "uma"], "DREPOLD": ["OLD DREP", "Old drep", "Drepold", "DREPOLD", "drepold", "old drep"], "SCRT": ["SCRT", "secret", "Scrt", "SECRET", "scrt", "Secret"], "TUSD": ["Tusd", "trueusd", "tusd", "TRUEUSD", "TUSD", "Trueusd"], "EZ": ["easyfi", "EASYFI", "Ez", "Easyfi", "EZ", "ez"], "TKO": ["Tko", "tko", "TKO", "tokocrypto", "Tokocrypto", "TOKOCRYPTO"], "WABI": ["Wabi", "tael", "wabi", "TAEL", "WABI", "Tael"], "IDRT": ["rupiah token", "IDRT", "idrt", "Idrt", "RUPIAH TOKEN", "Rupiah token"], "ENG": ["enigma", "Enigma", "ENG", "ENIGMA", "eng", "Eng"], "ENJ": ["Enj", "enj", "ENJ", "ENJIN COIN", "enjin coin", "Enjin coin"], "UNIDOWN": ["Unidown", "unidown", "UNIDOWN"], "YFII": ["YFII", "DFI.MONEY", "Dfi.money", "dfi.money", "yfii", "Yfii"], "KZT": ["KZT", "Kzt", "Kazakhstani tenge", "kazakhstani tenge", "kzt", "KAZAKHSTANI TENGE"], "OAX": ["Oax", "Openanx", "OPENANX", "openanx", "OAX", "oax"], "GRT": ["the graph", "The graph", "THE GRAPH", "GRT", "grt", "Grt"], "GRS": ["groestlcoin", "grs", "Grs", "Groestlcoin", "GRS", "GROESTLCOIN"], "UND": ["UNIFICATION", "unification", "UND", "Unification", "Und", "und"], "HARD": ["HARD", "Hard protocol", "Hard", "hard", "hard protocol", "HARD PROTOCOL"], "TFUEL": ["TFUEL", "THETA FUEL", "theta fuel", "tfuel", "Theta fuel", "Tfuel"], "LEND": ["lend", "AAVE", "LEND", "Aave", "Lend", "aave"], "DLT": ["Agrello", "dlt", "DLT", "AGRELLO", "Dlt", "agrello"], "TROY": ["troy", "Troy", "TROY"], "XLMUP": ["Xlmup", "XLMUP", "xlmup"], "UNI": ["UNI", "UNISWAP", "uniswap", "Uni", "uni", "Uniswap"], "BTCDOWN": ["BTCDOWN", "btcdown", "Btcdown"], "TLM": ["ALIEN WORLDS", "Alien worlds", "Tlm", "tlm", "alien worlds", "TLM"], "HUF": ["hungarian forint ", "Huf", "Hungarian forint ", "HUNGARIAN FORINT ", "HUF", "huf"], "SBTC": ["Super bitcoin", "super bitcoin", "SUPER BITCOIN", "Sbtc", "sbtc", "SBTC"], "CKB": ["ckb", "CKB", "Ckb"], "WRX": ["WAZIRX", "WRX", "wrx", "Wrx", "Wazirx", "wazirx"], "XTZ": ["Tezos", "XTZ", "TEZOS", "Xtz", "xtz", "tezos"], "LUNA": ["Luna", "Terra", "luna", "terra", "LUNA", "TERRA"], "ETHDOWN": ["ETHDOWN", "Ethdown", "ethdown"], "AGI": ["SINGULARITYNET", "AGI", "agi", "Agi", "singularitynet", "Singularitynet"], "BCHA": ["Bcha", "Bitcoin cash abc", "BITCOIN CASH ABC", "bitcoin cash abc", "BCHA", "bcha"], "EON": ["Eon", "eon", "EON", "Eos network", "eos network", "EOS NETWORK"], "EOP": ["eop", "Eospace", "EOP", "EOSPACE", "eospace", "Eop"], "EOS": ["Eos", "EOS", "eos"], "GO": ["Go", "GO", "go", "gochain", "Gochain", "GOCHAIN"], "NCASH": ["NUCLEUS VISION", "nucleus vision", "ncash", "NCASH", "Nucleus vision", "Ncash"], "RIF": ["RIF", "rif", "rsk infrastructure framework", "Rsk infrastructure framework", "Rif", "RSK INFRASTRUCTURE FRAMEWORK"], "EOSBULL": ["eosbull", "Eosbull", "EOSBULL", "3x long eos token", "3X LONG EOS TOKEN"], "NSBT": ["Neutrino token", "NSBT", "nsbt", "Nsbt", "neutrino token", "NEUTRINO TOKEN"], "SKL": ["Skl", "SKL", "SKALE NETWORK", "skale network", "skl", "Skale network"], "PEN": ["peruvian sol", "pen", "Pen", "Peruvian sol", "PEN", "PERUVIAN SOL"], "BLINK": ["blink", "blockmason link", "Blockmason link", "BLOCKMASON LINK", "BLINK", "Blink"], "SXPDOWN": ["SXPDOWN", "Sxpdown", "sxpdown"], "HC": ["HYPERCASH", "Hypercash", "Hc", "hc", "hypercash", "HC"], "SKY": ["Sky", "SKY", "skycoin", "SKYCOIN", "Skycoin", "sky"], "BURGER": ["burger", "Burger swap", "BURGER SWAP", "Burger", "burger swap", "BURGER"], "NAS": ["NEBULAS", "nebulas", "NAS", "nas", "Nas", "Nebulas"], "NAV": ["Nav", "NAV", "nav", "Navcoin", "navcoin", "NAVCOIN"], "GTO": ["gifto", "Gto", "GIFTO", "GTO", "gto", "Gifto"], "WTC": ["walton", "WTC", "Wtc", "WALTON", "wtc", "Walton"], "XVG": ["Xvg", "XVG", "verge", "Verge", "xvg", "VERGE"], "EPS": ["Ellipsis", "ellipsis", "eps", "Eps", "EPS", "ELLIPSIS"], "TNB": ["TIME NEW BANK", "Time new bank", "Tnb", "time new bank", "tnb", "TNB"], "DNT": ["dnt", "District0x", "DISTRICT0X", "district0x", "Dnt", "DNT"], "BULL": ["Bull", "BULL", "bull", "3x long bitcoin token", "3X LONG BITCOIN TOKEN"], "XTZDOWN": ["Xtzdown", "XTZDOWN", "xtzdown"], "XVS": ["Venus", "XVS", "xvs", "VENUS", "Xvs", "venus"], "STEEM": ["STEEM", "steem", "Steem"], "BVND": ["bvnd", "Bvnd", "BVND"], "SLP": ["slp", "Small love potion", "SLP", "small love potion", "SMALL LOVE POTION", "Slp"], "NBS": ["NBS", "NEW BITSHARES", "nbs", "new bitshares", "Nbs", "New bitshares"], "DON": ["Don", "DONNIE FINANCE", "don", "donnie finance", "Donnie finance", "DON"], "DOT": ["POLKADOT", "Polkadot", "Dot", "DOT", "dot", "polkadot"], "IQ": ["EVERIPEDIA", "Iq", "iq", "Everipedia", "everipedia", "IQ"], "CMT": ["cmt", "CMT", "Cybermiles", "cybermiles", "CYBERMILES", "Cmt"], "GRTUP": ["GRTUP", "Grtup", "grtup"], "1INCH": ["1inch", "1INCH"], "XRPBULL": ["3X LONG XRP TOKEN", "XRPBULL", "Xrpbull", "xrpbull", "3x long xrp token"], "MITH": ["Mith", "mithril", "MITHRIL", "MITH", "Mithril", "mith"], "ERD": ["elrond", "erd", "ELROND", "Erd", "Elrond", "ERD"], "DEGO": ["dego finance", "DEGO", "Dego", "Dego finance", "DEGO FINANCE", "dego"], "CND": ["Cnd", "CND", "cnd", "CINDICATOR", "cindicator", "Cindicator"], "UNFI": ["Unifi protocol dao", "unifi protocol dao", "UNFI", "unfi", "Unfi", "UNIFI PROTOCOL DAO"], "FTM": ["Ftm", "FTM", "FANTOM", "Fantom", "fantom", "ftm"], "POWR": ["Powerledger", "POWERLEDGER", "Powr", "powerledger", "powr", "POWR"], "GVT": ["gvt", "GVT", "GENESIS VISION", "Genesis vision", "Gvt", "genesis vision"], "WINGS": ["Wings", "wings", "WINGS"], "FTT": ["ftx token", "Ftx token", "FTT", "FTX TOKEN", "Ftt", "ftt"], "PHA": ["Phala.network", "Pha", "PHALA.NETWORK", "pha", "phala.network", "PHA"], "RLC": ["Iexecrlc", "RLC", "rlc", "Rlc", "iexecrlc", "IEXECRLC"], "PHB": ["phoenix global", "PHOENIX GLOBAL", "Phb", "PHB", "phb", "Phoenix global"], "TRXDOWN": ["trxdown", "Trxdown", "TRXDOWN"], "ATOM": ["cosmos", "ATOM", "COSMOS", "atom", "Atom", "Cosmos"], "XRPUP": ["Xrpup", "XRPUP", "xrpup"], "BLZ": ["BLUZELLE", "Blz", "Bluzelle", "blz", "BLZ", "bluzelle"], "SNM": ["Sonm", "snm", "sonm", "Snm", "SONM", "SNM"], "MBL": ["Moviebloc", "mbl", "MBL", "moviebloc", "Mbl", "MOVIEBLOC"], "BNBUP": ["BNBUP", "Bnbup", "bnbup"], "SNT": ["snt", "status", "SNT", "STATUS", "Snt", "Status"], "SNX": ["SYNTHETIX NETWORK TOKEN", "Snx", "SNX", "snx", "synthetix network token", "Synthetix network token"], "LTCDOWN": ["LTCDOWN", "ltcdown", "Ltcdown"], "FUN": ["Funtoken", "fun", "FUN", "Fun", "funtoken", "FUNTOKEN"], "SNMOLD": ["SONM OLD", "SNMOLD", "snmold", "Snmold", "sonm old", "Sonm old"], "COS": ["COS", "Cos", "Contentos", "cos", "CONTENTOS", "contentos"], "USD": ["Usd", "usd", "USD"], "QKC": ["Quarkchain", "QUARKCHAIN", "qkc", "Qkc", "quarkchain", "QKC"], "SUSHIUP": ["Sushiup", "SUSHIUP", "sushiup"], "ROSE": ["rose", "Oasis network", "ROSE", "Rose", "OASIS NETWORK", "oasis network"], "XYM": ["XYM", "symbol", "SYMBOL", "Xym", "Symbol", "xym"], "SOL": ["sol", "Solana", "SOLANA", "Sol", "SOL", "solana"], "TRXUP": ["TRXUP", "trxup", "Trxup"], "ETC": ["ETHEREUM CLASSIC", "etc", "Ethereum classic", "ETC", "ethereum classic", "Etc"], "ETF": ["Etf", "etf", "ETF"], "BNB": ["Bnb", "bnb", "BNB"], "CELR": ["CELER NETWORK", "celer network", "Celr", "CELR", "Celer network", "celr"], "OGN": ["Ogn", "origintoken", "ogn", "OGN", "Origintoken", "ORIGINTOKEN"], "ETH": ["ETHEREUM", "ETH", "ethereum", "Ethereum", "eth", "Eth"], "NEO": ["NEO", "Neo", "neo"], "TOMO": ["Tomo", "Tomochain", "TOMO", "TOMOCHAIN", "tomo", "tomochain"], "CELO": ["Celo", "celo", "CELO"], "AUCTION": ["auction", "Auction", "AUCTION"], "BADGER": ["BADGER", "badger", "BADGER DAO", "Badger dao", "Badger", "badger dao"], "GXS": ["gxs", "Gxchain", "Gxs", "gxchain", "GXCHAIN", "GXS"], "TRB": ["tellor tributes", "Tellor tributes", "TELLOR TRIBUTES", "trb", "Trb", "TRB"], "BNT": ["Bancor", "bnt", "BNT", "Bnt", "bancor", "BANCOR"], "QLC": ["qlc chain", "QLC", "qlc", "Qlc", "Qlc chain", "QLC CHAIN"], "LBA": ["Lend borrow asset", "lend borrow asset", "LBA", "LEND BORROW ASSET", "Lba", "lba"], "MDA": ["moeda loyalty points", "MOEDA LOYALTY POINTS", "Moeda loyalty points", "Mda", "MDA", "mda"], "UTK": ["UTK", "UTRUST", "utrust", "utk", "Utrust", "Utk"], "EOSBEAR": ["EOSBEAR", "3X SHORT EOS TOKEN", "3x short eos token", "eosbear", "Eosbear"], "HEGIC": ["hegic", "HEGIC", "Hegic"], "AMB": ["ambrosus", "AMBROSUS", "AMB", "amb", "Ambrosus", "Amb"], "TRU": ["TRUEFI", "tru", "TRU", "Truefi", "truefi", "Tru"], "WBNB": ["Wbnb", "wbnb", "Wrapped bnb", "wrapped bnb", "WRAPPED BNB", "WBNB"], "FUEL": ["ETHERPARTY", "FUEL", "Etherparty", "Fuel", "etherparty", "fuel"], "DREP": ["drep", "DREP", "Drep"], "TRY": ["TURKISH LIRA", "TRY", "Try", "try", "turkish lira", "Turkish lira"], "TRX": ["Trx", "TRON", "tron", "trx", "TRX", "Tron"], "MDT": ["measurable data token", "Measurable data token", "mdt", "Mdt", "MDT", "MEASURABLE DATA TOKEN"], "XRPDOWN": ["Xrpdown", "XRPDOWN", "xrpdown"], "AERGO": ["Aergo", "aergo", "AERGO"], "EUR": ["eur", "EUR", "EURO", "Euro", "Eur", "euro"], "BOT": ["BOT", "Bounce token", "bounce token", "BOUNCE TOKEN", "Bot", "bot"], "NULS": ["NULS", "nuls", "Nuls"], "AUTO": ["auto", "Auto", "AUTO"], "NGN": ["Nigerian naira", "NIGERIAN NAIRA", "NGN", "Ngn", "nigerian naira", "ngn"], "EGLD": ["Egld", "ELROND EGOLD", "elrond egold", "EGLD", "Elrond egold", "egld"], "ANTOLD": ["ANTOLD", "antold", "Antold", "Old aragon", "old aragon", "OLD ARAGON"], "PUNDIX": ["PUNDIX", "PUNDI X", "Pundix", "pundi x", "Pundi x", "pundix"], "FXS": ["frax share", "Fxs", "Frax share", "fxs", "FXS", "FRAX SHARE"], "HNST": ["Honest", "honest", "HONEST", "HNST", "hnst", "Hnst"], "EVX": ["everex", "evx", "Everex", "Evx", "EVX", "EVEREX"], "CRV": ["curve", "crv", "Crv", "Curve", "CURVE", "CRV"], "BAKE": ["bakerytoken", "Bakerytoken", "Bake", "bake", "BAKE", "BAKERYTOKEN"], "ANT": ["ARAGON", "Ant", "Aragon", "ant", "aragon", "ANT"], "LINKUP": ["linkup", "Linkup", "LINKUP"], "SRM": ["serum", "Srm", "Serum", "srm", "SRM", "SERUM"], "PLN": ["PLN", "polish zlotych ", "pln", "Polish zlotych ", "Pln", "POLISH ZLOTYCH "], "ETHBEAR": ["Ethbear", "3X SHORT ETHEREUM TOKEN", "ETHBEAR", "3x short ethereum token", "ethbear"], "ALICE": ["my neighbor alice", "ALICE", "alice", "MY NEIGHBOR ALICE", "Alice", "My neighbor alice"], "OG": ["OG", "og fan token", "og", "OG FAN TOKEN", "Og", "Og fan token"], "MFT": ["mft", "Mainframe", "MFT", "mainframe", "Mft", "MAINFRAME"], "OM": ["mantra dao", "om", "OM", "MANTRA DAO", "Mantra dao", "Om"], "BETH": ["beth", "BETH", "Beth"], "BQX": ["VOYAGER TOKEN", "BQX", "Voyager token", "Bqx", "voyager token", "bqx"], "WETH": ["weth", "Wrapped ether", "Weth", "WETH", "WRAPPED ETHER", "wrapped ether"], "BRD": ["BRD", "brd", "Bread", "bread", "BREAD", "Brd"], "BUSD": ["Busd", "BUSD", "busd"], "CTK": ["Certik", "CERTIK", "ctk", "Ctk", "CTK", "certik"], "ARPA": ["Arpa", "Arpa chain", "ARPA CHAIN", "arpa chain", "ARPA", "arpa"], "DOTDOWN": ["DOTDOWN", "Dotdown", "dotdown"], "BRL": ["Brazilian real", "BRAZILIAN REAL", "brl", "Brl", "BRL", "brazilian real"], "CTR": ["Ctr", "CENTRA", "ctr", "centra", "CTR", "Centra"], "MATIC": ["POLYGON", "matic", "Matic", "MATIC", "polygon", "Polygon"], "IOTX": ["iotex", "Iotx", "IOTEX", "IOTX", "Iotex", "iotx"], "TVK": ["TVK", "terra virtua", "TERRA VIRTUA", "tvk", "Tvk", "Terra virtua"], "FRONT": ["Frontier", "front", "frontier", "Front", "FRONT", "FRONTIER"], "ZAR": ["SOUTH AFRICAN RAND", "zar", "Zar", "ZAR", "south african rand", "South african rand"], "DOCK": ["Dock", "dock", "DOCK"], "STX": ["STX", "STACKS", "stx", "stacks", "Stx", "Stacks"], "PNT": ["pnt", "PNT", "Pnt", "PNETWORK", "Pnetwork", "pnetwork"], "DENT": ["dent", "Dent", "DENT"], "QI": ["Qi", "qiswap", "qi", "Qiswap", "QISWAP", "QI"], "BCPT": ["BCPT", "Bcpt", "Blockmason credit protocol", "bcpt", "BLOCKMASON CREDIT PROTOCOL", "blockmason credit protocol"], "BNBBEAR": ["Bnbbear", "BNBBEAR", "3x short bnb token", "3X SHORT BNB TOKEN", "bnbbear"], "VIBE": ["VIBE", "Vibe", "vibe"], "SUB": ["substratum", "Sub", "SUB", "sub", "SUBSTRATUM", "Substratum"], "POA": ["Poa", "POA NETWORK", "poa network", "poa", "POA", "Poa network"], "IOST": ["iost", "Iost", "IOST"], "CAKE": ["pancakeswap", "PANCAKESWAP", "CAKE", "Pancakeswap", "Cake", "cake"], "ETHUP": ["ETHUP", "ethup", "Ethup"], "POE": ["po.et", "poe", "POE", "PO.ET", "Po.et", "Poe"], "OMG": ["omg", "OMG", "OMG NETWORK", "Omg network", "Omg", "omg network"], "BAND": ["band", "Band", "BAND"], "SUN": ["SUN", "sun", "Sun"], "BTC": ["bitcoin", "Bitcoin", "btc", "Btc", "BTC", "BITCOIN"], "TWT": ["Trust wallet token", "TRUST WALLET TOKEN", "Twt", "twt", "trust wallet token", "TWT"], "NKN": ["NKN", "Nkn", "nkn"], "RSR": ["Reserve rights", "rsr", "RESERVE RIGHTS", "Rsr", "RSR", "reserve rights"], "IOTA": ["iota", "Miota", "MIOTA", "miota", "Iota", "IOTA"], "CVC": ["civic", "cvc", "Cvc", "CIVIC", "CVC", "Civic"], "REEF": ["Reef finance", "reef", "reef finance", "REEF FINANCE", "REEF", "Reef"], "BTG": ["BTG", "BITCOIN GOLD", "btg", "Btg", "Bitcoin gold", "bitcoin gold"], "MIR": ["Mirror protocol", "Mir", "MIR", "MIRROR PROTOCOL", "mir", "mirror protocol"], "KES": ["Kenya shilling", "kenya shilling", "KES", "KENYA SHILLING", "Kes", "kes"], "ARK": ["ark", "Ark", "ARK"], "CVP": ["powerpool", "cvp", "CVP", "Powerpool", "POWERPOOL", "Cvp"], "ARN": ["arn", "aeron", "Arn", "Aeron", "AERON", "ARN"], "KEY": ["Key", "SELFKEY", "key", "Selfkey", "selfkey", "KEY"], "BTS": ["Bitshares", "BITSHARES", "bts", "Bts", "BTS", "bitshares"], "ARS": ["argentine peso", "ars", "ARGENTINE PESO", "ARS", "Argentine peso", "Ars"], "BTT": ["bittorrent", "Btt", "btt", "BITTORRENT", "Bittorrent", "BTT"], "ONE": ["one", "harmony", "ONE", "HARMONY", "One", "Harmony"], "LINKDOWN": ["LINKDOWN", "linkdown", "Linkdown"], "ONG": ["ontology gas", "Ong", "ONG", "ONTOLOGY GAS", "Ontology gas", "ong"], "ANKR": ["Ankr", "ANKR", "ankr"], "SUSHI": ["SUSHI", "sushi", "Sushi"], "ALGO": ["algo", "algorand", "ALGORAND", "Algo", "ALGO", "Algorand"], "SC": ["sc", "SC", "SIACOIN", "siacoin", "Siacoin", "Sc"], "WBTC": ["WRAPPED BITCOIN", "WBTC", "wrapped bitcoin", "Wrapped bitcoin", "wbtc", "Wbtc"], "ONT": ["ontology", "ONTOLOGY", "ONT", "ont", "Ontology", "Ont"], "PPT": ["Populous", "PPT", "Ppt", "POPULOUS", "populous", "ppt"], "ONX": ["Onx", "ONX", "ONX.FINANCE", "Onx.finance", "onx.finance", "onx"], "RUB": ["russian ruble", "Russian ruble", "rub", "RUB", "RUSSIAN RUBLE", "Rub"], "PIVX": ["Pivx", "PIVX", "pivx"], "ASR": ["asr", "Asr", "ASR", "AS ROMA FAN TOKEN", "As roma fan token", "as roma fan token"], "FIRO": ["firo", "FIRO", "Firo"], "AST": ["airswap", "AIRSWAP", "AST", "Airswap", "ast", "Ast"], "MANA": ["Decentraland", "MANA", "decentraland", "mana", "DECENTRALAND", "Mana"], "DOTUP": ["DOTUP", "Dotup", "dotup"], "MEETONE": ["meetone", "Meetone", "MEETONE"], "QSP": ["qsp", "Qsp", "Quantstamp", "QSP", "QUANTSTAMP", "quantstamp"], "ATD": ["ATIDIUM", "atidium", "Atd", "Atidium", "ATD", "atd"], "NMR": ["Numeraire", "Nmr", "NMR", "NUMERAIRE", "nmr", "numeraire"], "MKR": ["Maker", "mkr", "MAKER", "maker", "Mkr", "MKR"], "DODO": ["dodo", "DODO", "Dodo"], "LIT": ["LITENTRY", "LIT", "litentry", "lit", "Litentry", "Lit"], "ZEC": ["zcash", "zec", "ZCASH", "ZEC", "Zcash", "Zec"], "ATM": ["ATM", "Atl\u00e9tico de madrid fan token", "atm", "ATL\u00c9TICO DE MADRID FAN TOKEN", "atl\u00e9tico de madrid fan token", "Atm"], "APPC": ["Appcoins", "APPCOINS", "appcoins", "APPC", "appc", "Appc"], "JEX": ["Jex token", "jex", "Jex", "JEX", "JEX TOKEN", "jex token"], "ICX": ["icon", "icx", "Icx", "ICX", "ICON", "Icon"], "LOOM": ["loom network", "LOOM", "Loom network", "LOOM NETWORK", "Loom", "loom"], "ZEN": ["zen", "ZEN", "horizen", "HORIZEN", "Horizen", "Zen"], "KP3R": ["Keep3rv1", "kp3r", "keep3rv1", "KEEP3RV1", "Kp3r", "KP3R"], "DOGE": ["dogecoin", "DOGECOIN", "Doge", "Dogecoin", "doge", "DOGE"], "DUSK": ["Dusk", "dusk", "DUSK", "dusk network", "Dusk network", "DUSK NETWORK"], "ALPHA": ["ALPHA FINANCE LAB", "Alpha", "alpha", "alpha finance lab", "ALPHA", "Alpha finance lab"], "BOLT": ["Bolt", "BOLT", "bolt"], "SXP": ["Sxp", "swipe", "SWIPE", "sxp", "Swipe", "SXP"], "HBAR": ["Hbar", "hbar", "HBAR", "HEDERA HASHGRAPH", "Hedera hashgraph", "hedera hashgraph"], "RVN": ["Rvn", "rvn", "Ravencoin", "ravencoin", "RVN", "RAVENCOIN"], "AUD": ["aud", "AUSTRALIAN DOLLAR", "Australian dollar", "australian dollar", "Aud", "AUD"], "NANO": ["NANO", "Nano", "nano"], "IDR": ["idr", "Indonesian rupiah", "Idr", "IDR", "INDONESIAN RUPIAH", "indonesian rupiah"], "CTSI": ["CTSI", "CARTESI", "Cartesi", "ctsi", "cartesi", "Ctsi"], "KAVA": ["KAVA", "Kava", "kava"], "PSG": ["paris saint-germain fan token", "Paris saint-germain fan token", "PARIS SAINT-GERMAIN FAN TOKEN", "Psg", "PSG", "psg"], "HCC": ["hcc", "healthcare chain", "Hcc", "Healthcare chain", "HEALTHCARE CHAIN", "HCC"], "VIDT": ["Vidt datalink", "VIDT", "vidt", "VIDT DATALINK", "vidt datalink", "Vidt"], "NOK": ["nok", "Norwegian kroner ", "Nok", "norwegian kroner ", "NORWEGIAN KRONER ", "NOK"], "AVA": ["Ava", "Travala.com", "travala.com", "TRAVALA.COM", "AVA", "ava"], "SYS": ["sys", "Sys", "SYS", "Syscoin", "SYSCOIN", "syscoin"], "COCOS": ["Cocos", "COCOS", "Cocos-bcx", "cocos", "cocos-bcx", "COCOS-BCX"], "STRAX": ["Stratis", "STRATIS", "STRAX", "Strax", "stratis", "strax"], "EOSUP": ["Eosup", "EOSUP", "eosup"], "CZK": ["CZK", "Czech koruny ", "czk", "Czk", "czech koruny ", "CZECH KORUNY "], "GAS": ["gas", "Gas", "NEOGAS", "Neogas", "GAS", "neogas"], "COVEROLD": ["cover protocol old", "coverold", "Coverold", "COVER PROTOCOL OLD", "Cover protocol old", "COVEROLD"], "AAVEDOWN": ["Aavedown", "aavedown", "AAVEDOWN"], "THETA": ["theta", "theta token", "THETA", "Theta", "THETA TOKEN", "Theta token"], "BCHUP": ["Bchup", "bchup", "BCHUP"], "WAN": ["Wan", "wan", "WAN", "Wanchain", "wanchain", "WANCHAIN"], "ORN": ["ORN", "orion protocol", "orn", "Orn", "ORION PROTOCOL", "Orion protocol"], "PERL": ["PERL", "perl", "PERLIN", "Perlin", "Perl", "perlin"], "XLMDOWN": ["xlmdown", "XLMDOWN", "Xlmdown"], "AAVE": ["AAVE", "aave", "Aave"], "XRPBEAR": ["3X SHORT XRP TOKEN", "XRPBEAR", "xrpbear", "Xrpbear", "3x short xrp token"], "GBP": ["pound sterling", "POUND STERLING", "GBP", "Gbp", "gbp", "Pound sterling"], "PERP": ["Perpetual protocol", "PERP", "Perp", "perpetual protocol", "perp", "PERPETUAL PROTOCOL"], "1INCHUP": ["1inchup", "1INCHUP"], "SXPUP": ["sxpup", "SXPUP", "Sxpup"], "YFIDOWN": ["yfidown", "Yfidown", "YFIDOWN"], "YFI": ["Yfi", "Yearn.finance", "YEARN.FINANCE", "yfi", "YFI", "yearn.finance"], "PERLOLD": ["Perlold", "perlold", "PERLIN OLD TOKEN", "PERLOLD", "Perlin old token", "perlin old token"], "MOD": ["MODUM", "mod", "modum", "Mod", "Modum", "MOD"], "OST": ["ost", "OST", "Ost"], "ZIL": ["zilliqa", "Zilliqa", "ZILLIQA", "ZIL", "zil", "Zil"], "AXS": ["Axs", "AXS", "axs", "AXIE INFINITY", "axie infinity", "Axie infinity"], "VAI": ["vai", "Vai", "VAI"], "XEM": ["Nem", "xem", "Xem", "XEM", "nem", "NEM"], "CTXC": ["CORTEX", "cortex", "Ctxc", "CTXC", "Cortex", "ctxc"], "XTZUP": ["xtzup", "XTZUP", "Xtzup"], "BIDR": ["bidr", "BIDR", "Bidr"], "BCHSV": ["BCHSV", "bchsv", "BITCOIN CASH SV", "Bchsv", "Bitcoin cash sv", "bitcoin cash sv"], "AAVEUP": ["AAVEUP", "Aaveup", "aaveup"], "SUSHIDOWN": ["sushidown", "Sushidown", "SUSHIDOWN"], "COMP": ["COMP", "COMPOUND", "compound", "Compound", "comp", "Comp"], "ETHBNT": ["Bnt smart token relay", "Ethbnt", "ETHBNT", "bnt smart token relay", "ethbnt", "BNT SMART TOKEN RELAY"], "OMOLD": ["Omold", "old mantra dao", "omold", "OLD MANTRA DAO", "Old mantra dao", "OMOLD"], "RUNE": ["Rune", "THORCHAIN", "rune", "thorchain", "RUNE", "Thorchain"], "FORTH": ["forth", "Forth", "FORTH", "AMPLEFORTH GOVERNANCE TOKEN", "ampleforth governance token", "Ampleforth governance token"], "KMD": ["kmd", "komodo", "KMD", "Komodo", "KOMODO", "Kmd"], "GHST": ["aavegotchi", "ghst", "GHST", "Ghst", "Aavegotchi", "AAVEGOTCHI"], "IDEX": ["Idex", "IDEX", "idex"], "BNBDOWN": ["bnbdown", "Bnbdown", "BNBDOWN"], "DEXE": ["dexe", "DEXE", "Dexe"], "AVAX": ["avalanche", "Avalanche", "AVAX", "Avax", "AVALANCHE", "avax"], "UAH": ["ukraine hryvnia", "Ukraine hryvnia", "UAH", "uah", "UKRAINE HRYVNIA", "Uah"], "KNC": ["KYBERNETWORK", "knc", "kybernetwork", "KNC", "Kybernetwork", "Knc"], "PROS": ["Prosper", "prosper", "pros", "PROSPER", "Pros", "PROS"], "PROM": ["PROM", "PROMETEUS", "Prom", "prometeus", "Prometeus", "prom"], "BTCUP": ["btcup", "BTCUP", "Btcup"], "CHAT": ["Chat", "chat", "CHATCOIN", "CHAT", "Chatcoin", "chatcoin"], "BGBP": ["BGBP", "bgbp", "Bgbp"], "HIVE": ["HIVE", "Hive", "hive"], "BIFI": ["Beefy.finance", "BIFI", "beefy.finance", "BEEFY.FINANCE", "bifi", "Bifi"], "SNGLS": ["SNGLS", "BREAKER", "Sngls", "sngls", "Breaker", "breaker"], "DAI": ["dai", "DAI", "Dai"], "YFIUP": ["yfiup", "YFIUP", "Yfiup"], "FET": ["FETCH.AI", "FET", "Fet", "fetch.ai", "Fetch.ai", "fet"], "ETHBULL": ["Ethbull", "ETHBULL", "3X LONG ETHEREUM TOKEN", "3x long ethereum token", "ethbull"], "LRC": ["lrc", "LOOPRING", "loopring", "Loopring", "Lrc", "LRC"], "REPV1": ["augur", "Repv1", "Augur", "AUGUR", "REPV1", "repv1"], "ADXOLD": ["adex old token", "Adex old token", "adxold", "Adxold", "ADEX OLD TOKEN", "ADXOLD"], "MTH": ["monetha", "MONETHA", "MTH", "Mth", "Monetha", "mth"], "MTL": ["mtl", "METAL", "Metal", "MTL", "metal", "Mtl"], "VET": ["vechain", "Vechain", "VET", "VECHAIN", "vet", "Vet"], "USDT": ["Usdt", "tetherus", "Tetherus", "TETHERUS", "USDT", "usdt"], "USDS": ["stableusd", "USDS", "STABLEUSD", "Usds", "usds", "Stableusd"], "OXT": ["oxt", "orchid", "ORCHID", "Orchid", "Oxt", "OXT"], "DASH": ["dash", "DASH", "Dash"], "NVT": ["NVT", "Nervenetwork", "nvt", "NERVENETWORK", "nervenetwork", "Nvt"], "SWRV": ["SWERVE", "SWRV", "Swerve", "swrv", "Swrv", "swerve"], "EDO": ["EDO", "edo", "EIDOO", "Edo", "eidoo", "Eidoo"], "GHS": ["Ghanaian cedi", "GHANAIAN CEDI", "GHS", "Ghs", "ghanaian cedi", "ghs"], "BTCST": ["BITCOIN STANDARD HASHRATE TOKEN", "Btcst", "BTCST", "bitcoin standard hashrate token", "btcst", "Bitcoin standard hashrate token"], "HKD": ["Hong kong dollar", "HONG KONG DOLLAR", "hong kong dollar", "HKD", "hkd", "Hkd"], "LSK": ["LISK", "lisk", "lsk", "Lisk", "Lsk", "LSK"], "CAD": ["canadian dollar", "CAD", "cad", "Canadian dollar", "Cad", "CANADIAN DOLLAR"], "BEAR": ["bear", "3X SHORT BITCOIN TOKEN", "3x short bitcoin token", "BEAR", "Bear"], "BEAM": ["Beam", "beam", "BEAM"], "CAN": ["CANYACOIN", "canyacoin", "CAN", "can", "Canyacoin", "Can"], "DCR": ["decred", "dcr", "DECRED", "DCR", "Decred", "Dcr"], "CREAM": ["CREAM", "Cream", "Cream finance", "cream", "CREAM FINANCE", "cream finance"], "DATA": ["data", "Data", "STREAMR DATACOIN", "Streamr datacoin", "DATA", "streamr datacoin"], "ENTRP": ["HUT34 ENTROPY", "ENTRP", "entrp", "hut34 entropy", "Entrp", "Hut34 entropy"], "FILUP": ["filup", "FILUP", "Filup"], "UNIUP": ["UNIUP", "uniup", "Uniup"], "LTC": ["litecoin", "LTC", "Litecoin", "ltc", "Ltc", "LITECOIN"], "USDC": ["usd coin", "Usdc", "Usd coin", "usdc", "USDC", "USD COIN"], "WIN": ["wink", "win", "Win", "WIN", "WINK", "Wink"], "BNBBULL": ["3x long bnb token", "Bnbbull", "BNBBULL", "3X LONG BNB TOKEN", "bnbbull"], "LTCUP": ["ltcup", "LTCUP", "Ltcup"], "INJ": ["INJECTIVE PROTOCOL", "injective protocol", "Inj", "INJ", "inj", "Injective protocol"], "TCT": ["tokenclub token", "TOKENCLUB TOKEN", "tct", "Tokenclub token", "Tct", "TCT"], "LTO": ["lto network", "LTO NETWORK", "Lto network", "lto", "LTO", "Lto"], "NXS": ["nexus", "Nexus", "Nxs", "NXS", "NEXUS", "nxs"], "INR": ["inr", "Inr", "INR"], "CBK": ["COBAK", "Cbk", "cbk", "cobak", "CBK", "Cobak"], "CBM": ["Cbm", "CBM", "cbm", "crypto bonus miles token", "Crypto bonus miles token", "CRYPTO BONUS MILES TOKEN"], "INS": ["INS", "Ins", "insolar", "Insolar", "INSOLAR", "ins"], "POND": ["Pond", "marlin", "POND", "MARLIN", "pond", "Marlin"], "JPY": ["jpy", "japanese yen", "JPY", "Japanese yen", "JAPANESE YEN", "Jpy"], "LINA": ["lina", "linear", "Lina", "LINEAR", "LINA", "Linear"], "XLM": ["Stellar lumens", "XLM", "xlm", "Xlm", "stellar lumens", "STELLAR LUMENS"], "LINK": ["Link", "Chainlink", "link", "chainlink", "LINK", "CHAINLINK"], "QTUM": ["Qtum", "QTUM", "qtum"], "FILDOWN": ["fildown", "FILDOWN", "Fildown"], "SUPER": ["super", "Superfarm", "SUPERFARM", "superfarm", "Super", "SUPER"], "UFT": ["Unilend", "UFT", "UNILEND", "uft", "Uft", "unilend"], "KSM": ["ksm", "kusama", "Kusama", "KSM", "KUSAMA", "Ksm"], "LUN": ["LUNYR", "LUN", "lun", "lunyr", "Lun", "Lunyr"], "FIL": ["Fil", "FIL", "FILECOIN", "fil", "Filecoin", "filecoin"], "POLY": ["Polymath", "polymath", "Poly", "POLYMATH", "POLY", "poly"], "STMX": ["STORMX", "STMX", "Stmx", "Stormx", "stormx", "stmx"], "BAL": ["bal", "BALANCER", "balancer", "BAL", "Balancer", "Bal"], "FIO": ["FIO PROTOCOL", "Fio protocol", "FIO", "fio protocol", "fio", "Fio"], "VIB": ["viberate", "Vib", "VIB", "Viberate", "vib", "VIBERATE"], "VIA": ["VIACOIN", "viacoin", "Viacoin", "via", "VIA", "Via"], "FIS": ["Fis", "fis", "STAFI", "Stafi", "stafi", "FIS"], "BAR": ["fc barcelona fan token bar", "Bar", "bar", "Fc barcelona fan token bar", "BAR", "FC BARCELONA FAN TOKEN BAR"], "BAT": ["BASIC ATTENTION TOKEN", "Basic attention token", "Bat", "basic attention token", "BAT", "bat"], "VRAB": ["Vrab", "VRAB", "verasity", "VERASITY", "Verasity", "vrab"], "AKRO": ["Akropolis", "akropolis", "Akro", "AKROPOLIS", "AKRO", "akro"], "NZD": ["Nzd", "New zealand dollar", "NZD", "nzd", "NEW ZEALAND DOLLAR", "new zealand dollar"], "XMR": ["MONERO", "Xmr", "Monero", "monero", "xmr", "XMR"], "1INCHDOWN": ["1inchdown", "1INCHDOWN"], "COTI": ["Coti", "COTI", "coti"]}"""
    return json.loads(str_json)


class TestCoinCounter(unittest.TestCase):

    def testCountTotal(self):
        strings = [

            'idk but I just bought bnb',
            'Binance actually provides a great Liquid swap ooportunity there! You only need some BNB and INJ!',
            """
            I already have some.
        I would not buy now, it's too vertical.
        Do you know about VIB ? CFX ? MIR ?
            """,
            'BNB lol',

        ]
        le_dict = {}
        binance_coins = _get_api_stuff()

        for string in strings:
            r = count_unique_symbols_in_string(string, binance_coins)
            le_dict = count_total(r, le_dict)

        self.assertEqual(3, le_dict.get("BNB"))
        self.assertEqual(1, le_dict.get("JST"))
        self.assertEqual(1, le_dict.get("INJ"))
        self.assertEqual(1, le_dict.get("CFX"))
        self.assertEqual(1, le_dict.get("MIR"))
        self.assertEqual(1, le_dict.get("VIB"))

    def testSpecialChar(self):
        binance_coins = _get_api_stuff()
        string = 'Binance actually provides a great Liquid swap ooportunity there! You only need some BNB and INJ!'
        result = count_unique_symbols_in_string(string, binance_coins)
        self.assertEqual(2, len(result))

    def testPositive(self):
        binance_coins = _get_api_stuff()
        string = " BTCD btc Btc LINK  BNB Ethereum Eth ETH"
        result = count_unique_symbols_in_string(string, binance_coins)
        self.assertEqual(4, len(result))

    def testNegative(self):
        binance_coins = _get_api_stuff()
        string = "BTCD NK  BNB  EthASS "
        result = count_unique_symbols_in_string(string, binance_coins)
        self.assertEqual(1, len(result))

    def testSingle(self):
        binance_coins = _get_api_stuff()
        string = "BNB"
        result = count_unique_symbols_in_string(string, binance_coins)
        self.assertEqual(1, len(result))
